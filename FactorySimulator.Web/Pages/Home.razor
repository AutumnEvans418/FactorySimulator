@page "/"
@using FactorySimulator.Display
@using FactorySimulator.Factories
@using FactorySimulator.GameWorld
@using SkiaSharp.Views.Blazor

<PageTitle>Home</PageTitle>

<pre>
    <code>
        @GameMermaid?.DisplayFactory()
    </code>
</pre>

<pre>
    <code class="language-mermaid">
        @GameMermaid?.DisplayFactory()
    </code>
</pre>

<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.0.2/+esm'
    mermaid.initialize({startOnLoad:true,theme:'dark'})
    await mermaid.run({querySelector:'code.language-mermaid'})
</script>

@code {
    public GameMermaid? GameMermaid { get; set; }

    protected override void OnInitialized()
    {
        var world = new World();

        var factory = new Factory(world);
        //factory.Miner(0).SmelterMerge();

        factory.Miner(1).IronRodFactory();

        GameMermaid = new GameMermaid(new Game(() => factory, world));

        base.OnInitialized();
    }
}